<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>log in</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark ctm-navbar">
        <div class="container-fluid">
          <span class="navbar-brand" id="pong">PONG</span>
          <div class="d-flex ms-auto align-items-center">
                <a class="nav-link ctm-link" href="index.html">Home</a>
            </div>
        </div>
      </nav>
      <!-- login card -->
       <div class="container mt-5 blinking-neon-frame">
          <div class="container ctm-card">
              <div class="w-75">
                  <h2 class="text-center ctm-text-title">Sign up</h2>
                  <h5 class="text-center ctm-text-light p-2">Create a new account to get started</h5>
                      <form id="signup-form">
                          <div class="form-floating mb-3">
                              <input type="email" class="form-control ctm-text-dark" maxlength="100" placeholder="email" id="email">
                              <label for="email" class="ctm-text-dark">Email</label>
                          </div>
                          <div class="form-floating mb-3">
                              <input type="text" class="form-control ctm-text-dark" maxlength="100" id="username" placeholder="User">
                              <label for="username" class="ctm-text-dark">Username</label>
                          </div>
                          <div class="form-floating mb-3">
                              <input type="password" class="form-control ctm-text-dark" maxlength="100"  id="password" placeholder="Password">
                              <label for="password" class="ctm-text-dark">Password</label>
                          </div>
                          <div class="form-floating mb-3">
                              <input type="password" class="form-control ctm-text-dark" maxlength="100" id="confirm-password" placeholder="Password">
                              <label for="confirm-password" class="ctm-text-dark">Confirm Password</label>
                          </div>
                          <div class="form-check mb-3">
                              <input type="checkbox" class="form-check-input" id="exampleCheck1">
                              <label class="form-check-label ctm-text-light" for="exampleCheck1">Remember me</label>
                          </div>
                          <div class="d-flex justify-content-center">
                              <button type="submit" class="btn ctm-btn">Submit</button>
                              <div class="text-center ctm-text-light p-1">or</div>
                              <button type="submit" id="submit" class="btn ctm-btn">login with 42</button>
                          </div>
                      </form>
                  <div class="d-flex justify-content-center mt-3">
                      <div class="ctm-text-light"> You already have an account?</div>
                      <a href="login.html" class="ctm-text-light ctm-link ms-2">log in</a>
                  </div>
              </div>
          </div>
      </div>
    <!-- Button trigger modal -->
<div class="container d-flex justify-content-center mt-5">
  <button type="button" class="btn ctm-btn" data-bs-toggle="modal" data-bs-target="#exampleModal">
    this wont be a button, but a pop-up when user does not exists
  </button>
</div>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title ctm-text-title" id="exampleModalLabel">Email already registered</h5>
          <button type="button" class="close-modal" data-bs-dismiss="modal" aria-label="Close">x</button>
        </div>
        <div class="modal-body">
          You already have an account?
            <a href="login.html" class="ctm-text-light ctm-link">Log in</a>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn ctm-btn" data-bs-dismiss="modal">Got it!</button>
<!--           <button type="button" class="btn btn-primary">Save changes</button>
 -->        </div>
      </div>
    </div>
  </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const signupForm = document.getElementById('signup-form');
    
            signupForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent the form from submitting
    
                const user = {
                    email: document.getElementById('email').value,
                    username: document.getElementById('username').value,
                    password: document.getElementById('password').value,
                    confirmPassword: document.getElementById('confirm-password').value,
                };
    
                if (user.username === '' || user.password === '' || user.email === '' || user.confirmPassword === '') {
                    alert('Please fill in all fields');
                    return;
                }
                if (user.password !== user.confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }
                registerUser(user);
            });
        });
    
        async function registerUser(user) {
            console.log('Attempting to register user', JSON.stringify(user));
            try {
                let response = await fetch('http://localhost:5000/register/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(user),
                });
                if (!response.ok) {
                    throw new Error('Failed to register user');
                }
            } catch (error) {
                console.error('fetch error:', error);
            }
        }
    </script>
    <script src="neon.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>